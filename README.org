#+TITLE: gdsfeel-php
#+AUTHOR: kenjirofukuda@gmail.com

GDSII ビューワー([[https://github.com/kenjirofukuda/gdsfeel-common][GdsFeel]])の PHP 実装です。

[[https://raw.githubusercontent.com/kenjirofukuda/public-images/refs/heads/main/gdsfeel-php.png]]

Web関連の技術の実務経験がないため、2025年10月から
- PHP
- JavaScript
の学習を始めました。

アプリケーションのジャンルとしては永続型のほうが相性が良いのですが PHP学習の素材として実装してみました。

ビューワーそのものはcanvas描画のため、PHPとうたいながらも実質的にはJavaScript実装です。

技術的な詳細解説は
https://deepwiki.com/kenjirofukuda/gdsfeel-php
に丸投げしています。

* 実行

#+begin_src bash
  cd gdsfeel-php/
  comporser dev run &
  # open browser http://localhost:8080
#+end_src

* その他
** 着手
- [[https://github.com/kenjirofukuda/gdsfeel-js][gdsfeel-js]] のtypescriptからの生成した js を ts-dist/に配置して様子見
- crash/ ディレクトリにて練習中
*** Laravelレイアウトに移行中
- [[https://github.com/kenjirofukuda/gdsfeel-php2]]
- PHP開発に求められている階層構造の整理
- マルチユーザー対応
- データーベース連携
- UnitTest

** 着手（未反映）
- レイヤーの自動カラー割当
  
** 未着手
- 初期設定の別画面化

* Debian 13移行時のトラブル
#+begin_example
> @php -S localhost:8080
[Tue Dec  2 08:56:44 2025] PHP 8.4.11 Development Server (http://localhost:8080) started
[Tue Dec  2 08:56:50 2025] [::1]:55780 Accepted
[Tue Dec  2 08:56:50 2025] PHP Fatal error:  Cannot redeclare function array_find() in /home/kenjiro/Nextcloud/prove/php-room/gdsfeel-php/std/utils.php on line 15
[Tue Dec  2 08:56:50 2025] [::1]:55780 [500]: GET / - Cannot redeclare function array_find() in /home/kenjiro/Nextcloud/prove/php-room/gdsfeel-php/std/utils.php on line 15
[Tue Dec  2 08:56:50 2025] [::1]:55780 Closing
[Tue Dec  2 08:56:50 2025] [::1]:55782 Accepted
[Tue Dec  2 08:56:54 2025] PHP Fatal error:  Cannot redeclare function array_find() in /home/kenjiro/Nextcloud/prove/php-room/gdsfeel-php/std/utils.php on line 15
[Tue Dec  2 08:56:54 2025] [::1]:55782 [500]: GET / - Cannot redeclare function array_find() in /home/kenjiro/Nextcloud/prove/php-room/gdsfeel-php/std/utils.php on line 15
[Tue Dec  2 08:56:54 2025] [::1]:55782 Closing
[Tue Dec  2 08:56:54 2025] [::1]:55798 Accepted
#+end_example

以下のガードでphp8.3には無かったポリフィル array_find ()の衝突を回避

#+begin_src php
  if (defined('PHP_VERSION') && version_compare(PHP_VERSION, '8.4.0', '<')) {
      ...
  }
#+end_src
